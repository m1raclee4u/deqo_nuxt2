(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{1022:function(e,t,n){var content=n(1097);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(32).default)("6c1f17b1",content,!0,{sourceMap:!1})},1096:function(e,t,n){"use strict";n(1022)},1097:function(e,t,n){var o=n(31)((function(i){return i[1]}));o.push([e.i,".pin[data-v-4cab6bd4]{display:flex;flex-direction:column;gap:1px}.pin span[data-v-4cab6bd4]{color:#a40101;font-size:12px}.timer[data-v-4cab6bd4]{align-items:center;display:flex;font-size:16px!important;justify-content:center}.timer span[data-v-4cab6bd4]{margin-right:10px}.timer .timer_icon[data-v-4cab6bd4]{align-items:center;display:flex}.timer .timer_icon b[data-v-4cab6bd4]{font-weight:400}.input-wrapper[data-v-4cab6bd4]{grid-gap:30px;display:grid;gap:30px;grid-template-columns:repeat(4,1fr);height:80px}.margin[data-v-4cab6bd4]{margin-top:-110px}.buttons[data-v-4cab6bd4]{grid-gap:25px;color:#685f5f;display:grid;gap:25px;grid-template-rows:repeat(1,1fr);max-width:80%;width:100%}.buttons p[data-v-4cab6bd4]{cursor:pointer;font-size:18px;font-weight:400;line-height:22px;text-align:center;-webkit-text-decoration:underline;text-decoration:underline;width:100%}.buttons b[data-v-4cab6bd4]{width:70px}.buttons .button[data-v-4cab6bd4]{border:1px solid #685f5f;border-radius:4px;font-size:24px;font-weight:600;padding:18px 20px;text-align:left}.buttons .next[data-v-4cab6bd4]{background-color:#a9a1a1;border:none;color:#fff;cursor:pointer;font-weight:400;text-align:center}.wrapper[data-v-4cab6bd4]{align-items:center;background-color:#fff;display:flex;flex-direction:column;gap:40px;height:400px;justify-content:center;margin:0 auto;min-height:70vh;padding:60px 110px;width:620px}.wrapper h3[data-v-4cab6bd4]{color:#685f5f;font-size:24px;font-weight:700;line-height:28px;text-align:center;width:100%}@media(max-width:640px){.wrapper[data-v-4cab6bd4]{padding:60px 10px;width:calc(100% - 10px)}}",""]),o.locals={},e.exports=o},1125:function(e,t,n){"use strict";n.r(t);var o=n(3),r=(n(28),n(78),n(109),n(40),n(39),n(1061),n(1070),n(1080),n(1083),n(1084),n(1086),n(1089),n(1092),n(1)),l={value:{type:String,required:!0},length:{type:Number,default:4},autofocus:{type:Boolean,default:!0},secure:{type:Boolean,default:!1},characterPreview:{type:Boolean,default:!0},charPreviewDuration:{type:Number,default:300}},c="^\\d{1}$",d="password",script=r.default.extend({props:l,data:function(){return{baseRefName:"vue-pincode-input",focusedCellIdx:0,cells:[],watchers:{},cellsInputTypes:{}}},computed:{pinCodeComputed:function(){return this.cells.reduce((function(a,b){return a+b.value}),"")}},watch:{value:function(a){a?this.onParentValueUpdated():this.reset()},length:function(){this.reset()},pinCodeComputed:function(a){this.$emit("input",a)}},mounted:function(){this.init(),this.onParentValueUpdated(),this.autofocus&&this.$nextTick(this.focusCellByIndex)},methods:{init:function(){for(var a=this.getRelevantInputType(),b=0;b<this.length;b+=1)this.setCellObject(b),this.setCellInputType(b,a),this.setCellWatcher(b)},setCellObject:function(a){this.$set(this.cells,a,{key:a,value:""})},setCellInputType:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d;this.$set(this.cellsInputTypes,a,b)},setCellWatcher:function(a){var b=this,e="cells.".concat(a,".value");this.watchers[e]=this.$watch(e,(function(e,t){return b.onCellChanged(a,e,t)}))},onParentValueUpdated:function(){var a=this;return this.value.length===this.length?void this.value.split("").forEach((function(b,e){a.cells[e].value=b||""})):void this.$emit("input",this.pinCodeComputed)},onCellChanged:function(a,b){return this.isTheCellValid(b,!1)?(this.focusNextCell(),void(this.secure&&this.characterPreview&&setTimeout(this.setCellInputType,this.charPreviewDuration,a))):void(this.cells[a].value="")},onCellErase:function(a,b){this.cells[a].value.length||(this.focusPreviousCell(),b.preventDefault())},onKeyDown:function(a){switch(a.keyCode){case 37:this.focusPreviousCell();break;case 39:this.focusNextCell()}},reset:function(){this.unwatchCells(),this.init(),this.focusCellByIndex()},unwatchCells:function(){var a=this;Object.keys(this.watchers).forEach((function(b){return a.watchers[b]()}))},isTheCellValid:function(a){var b=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return a?!!a.match(c):!!b&&""===a},getRelevantInputType:function(){return this.secure&&!this.characterPreview?d:"tel"},focusPreviousCell:function(){this.focusedCellIdx&&this.focusCellByIndex(this.focusedCellIdx-1)},focusNextCell:function(){this.focusedCellIdx===this.length-1||this.focusCellByIndex(this.focusedCellIdx+1)},focusCellByIndex:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,b="".concat(this.baseRefName).concat(a),e=this.$refs[b][0];e.focus(),e.select(),this.focusedCellIdx=a}}});function h(a,b,e,t,n,o,g,r,i,l){"boolean"!=typeof g&&(i=r,r=g,g=!1);var c,d="function"==typeof e?e.options:e;if(a&&a.render&&(d.render=a.render,d.staticRenderFns=a.staticRenderFns,d._compiled=!0,n&&(d.functional=!0)),t&&(d._scopeId=t),o?(c=function(a){(a=a||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(a=__VUE_SSR_CONTEXT__),b&&b.call(this,i(a)),a&&a._registeredComponents&&a._registeredComponents.add(o)},d._ssrRegister=c):b&&(c=g?function(a){b.call(this,l(a,this.$root.$options.shadowRoot))}:function(a){b.call(this,r(a))}),c)if(d.functional){var h=d.render;d.render=function(a,b){return c.call(b),h(a,b)}}else{var f=d.beforeCreate;d.beforeCreate=f?[].concat(f,c):[c]}return e}var f="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function v(){return function(a,b){return function(a,b){var e=f?b.media||"default":a,t=x[e]||(x[e]={ids:new Set,styles:[]});if(!t.ids.has(a)){t.ids.add(a);var n=b.source;if(b.map&&(n+="\n/*# sourceURL="+b.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(b.map))))+" */"),t.element||(t.element=document.createElement("style"),t.element.type="text/css",b.media&&t.element.setAttribute("media",b.media),void 0===m&&(m=document.head||document.getElementsByTagName("head")[0]),m.appendChild(t.element)),"styleSheet"in t.element)t.styles.push(n),t.element.styleSheet.cssText=t.styles.filter(Boolean).join("\n");else{var o=t.ids.size-1,r=document.createTextNode(n),g=t.element.childNodes;g[o]&&t.element.removeChild(g[o]),g.length?t.element.insertBefore(r,g[o]):t.element.appendChild(r)}}}(a,b)}}var m,x={};var w={watch:{inputPhoneModel:function(e){e.includes("+7 ")||(this.inputPhoneModel="+7 ")},timer:function(e){0===e&&(this.isTimerShown=!1)},isTimerShown:function(e){!0===e&&this.timerInterval()},code:function(e){console.log(e),4===e.length&&this.login()}},components:{PincodeInput:h({render:function(){var a=this,b=a.$createElement,e=a._self._c||b;return e("div",{staticClass:"vue-pincode-input-wrapper"},a._l(a.cells,(function(b,t){return e("input",a._b({directives:[{name:"model",rawName:"v-model.trim",value:b.value,expression:"cell.value",modifiers:{trim:!0}}],key:b.key,ref:""+a.baseRefName+t,refInFor:!0,staticClass:"vue-pincode-input",attrs:{type:a.cellsInputTypes[t]},domProps:{value:b.value},on:{focus:function(){a.focusedCellIdx=t},keydown:[function(b){return!b.type.indexOf("key")&&a._k(b.keyCode,"delete",[8,46],b.key,["Backspace","Delete","Del"])?null:a.onCellErase(t,b)},a.onKeyDown],input:function(e){e.target.composing||a.$set(b,"value",e.target.value.trim())},blur:function(){return a.$forceUpdate()}}},"input",a.$attrs,!1))})),0)},staticRenderFns:[]},(function(a){a&&a("data-v-13cc1c60_0",{source:".vue-pincode-input-wrapper{display:inline-flex}.vue-pincode-input{outline:0;margin:3px;padding:5px;max-width:40px;text-align:center;font-size:1.1rem;border:none;border-radius:3px;box-shadow:0 0 3px rgba(0,0,0,.5)}.vue-pincode-input:focus{box-shadow:0 0 6px rgba(0,0,0,.5)}",map:void 0,media:void 0})}),script,undefined,false,undefined,!1,v,void 0,void 0)},directives:{focus:{inserted:function(e){e.focus()}}},methods:{login:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$post("/auth/login",{phone:e.inputPhoneModel,code:e.code}).then((function(t){e.setBearerToken(t)})).catch((function(t){e.errors.wrongPincode=t.response.data.message}));case 2:case"end":return t.stop()}}),t)})))()},setBearerToken:function(e){var t=e.access_token;localStorage.setItem("token",t),this.$router.push("/user")},phoneRequest:function(){console.log(this.inputPhoneModel.length),this.isPhoneRequest=!0,this.isResendButtonShown=!0,this.isTimerShown=!0,this.$axios.$post("/auth/requestCode",{phone:this.inputPhoneModel})},timerInterval:function(){var e=this;this.timer=60;var t=setInterval((function(){e.timer--}),1e3);setTimeout((function(){clearInterval(t)}),6e4)}},data:function(){return{errors:{wrongPincode:!1},isResendButtonShown:!1,isTimerShown:!1,code:"",isPhoneRequest:!1,inputPhoneModel:"+7",timer:60}},computed:{isItemPage:function(){return"index"!==this.$route.name}}},C=(n(1096),n(23)),component=Object(C.a)(w,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper"},[t("h3",[e._v("Вход | Регистрация")]),e._v(" "),t("div",{staticClass:"buttons"},[t("input",{directives:[{name:"mask",rawName:"v-mask",value:"+7 ### ###-##-##",expression:"'+7 ### ###-##-##'"},{name:"model",rawName:"v-model",value:e.inputPhoneModel,expression:"inputPhoneModel"},{name:"focus",rawName:"v-focus"}],staticClass:"button",attrs:{type:"tel",autocomplete:"true",placeholder:"+7"},domProps:{value:e.inputPhoneModel},on:{input:function(t){t.target.composing||(e.inputPhoneModel=t.target.value)}}}),e._v(" "),t("div",{staticClass:"pin"},[e.isPhoneRequest?t("PincodeInput",{staticClass:"input-wrapper",model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}):e._e(),e._v(" "),e.errors.wrongPincode?t("span",{staticStyle:{"margin-top":"10px"}},[e._v("* "+e._s(e.errors.wrongPincode))]):e._e()],1),e._v(" "),e.isPhoneRequest?e._e():t("button",{staticClass:"button next",attrs:{disabled:16!==e.inputPhoneModel.length},on:{click:e.phoneRequest}},[e._v("Далее\n    ")]),e._v(" "),e.isResendButtonShown?t("button",{staticClass:"timer button next",attrs:{disabled:e.isTimerShown},on:{click:e.phoneRequest}},[t("span",[e._v("отправить код еще раз")]),e._v(" "),e.isTimerShown?t("span",{staticClass:"timer_icon"},[t("i",{staticClass:"el-icon-timer"}),e._v(" "),t("b",[e._v(e._s(e.timer)+" сек.")])]):e._e()]):e._e(),e._v(" "),t("p",[e._v("войти через электронную почту")])])])}),[],!1,null,"4cab6bd4",null);t.default=component.exports}}]);